<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Julkalendern</title>
  <!--  <script src="https://media.svt.se/download/flash/fiktion/spel/js/svtlib-statistics-v2/index.js"></script> -->
    <script src="modernizr.min.js"></script>
    <script type="text/javascript">
        (function(Modernizr) {
            var UA = {
                CANALDIGITAL: 'adb',
                ANDROID: 'android',
                ANDROID4: 'android 4',
                ANDROID5: 'android 5',
                CHROME: 'chrome',
                IE: 'msie',
                INETTV: 'inettvbrowser', // Sony
                IPAD: 'ipad',
                IPOD: 'ipod',
                IOS7: 'cpu os 7',
                IPHONE: 'iphone',
                LG: 'lg browser',
                MAC: 'mac',
                PANASONIC: 'viera',
                PHILIPS: 'philips',
                PS4: 'playstation 4',
                SAFARI: 'safari',
                SONYCE: 'sonycebrowser',
                WIIU: 'nintendo wiiu',
                WIN8: 'msapphost/2.0',
                WP: 'windows phone',
                WP_DESKTOP: 'wpdesktop'
            };

            var UA_SETTINGS = {
                fullScreen: [UA.PS4, UA.SONYCE, UA.INETTV, UA.PHILIPS],
                hlsCapable: [UA.PS4, UA.ANDROID5, UA.LG, UA.WIIU, UA.WEBOS, UA.NETCAST],
                hlsOnly: [UA.CANALDIGITAL, UA.PHILIPS, UA.SONYCE, UA.INETTV, UA.PANASONIC],
                iOS: [UA.IPAD, UA.IPHONE, UA.IPOD],
                iOSMobile: [UA.IPHONE, UA.IPOD],
                maxQuality: [UA.PS4, UA.LG, UA.WIIU, UA.SONYCE, UA.INETTV, UA.PANASONIC, UA.PHILIPS, UA.CANALDIGITAL],
                windowsPhone: [UA.WP, UA.WP_DESKTOP]
            };

            var CURR_UA = navigator.userAgent.toLowerCase();

            function _matchUserAgent(ua) {
                return CURR_UA.indexOf(ua) !== -1;
            }

            function _matchUserAgentList(uaList) {

                for (var i = 0; i < uaList.length; i++) {
                    if (_matchUserAgent(uaList[i])) {
                        return true;
                    }
                }
                return false;
            }

            function isAndroid() {
                return _matchUserAgent(UA.ANDROID) && !_matchUserAgent(UA.WP);
            }

            function isIOS() {
                return _matchUserAgentList(UA_SETTINGS.iOS) && !_matchUserAgent(UA.WP);
            }

            Modernizr.addTest('isiOS', function() {
                return isIOS();
            });

            Modernizr.addTest('isAndroid', function() {
                return isAndroid();
            });

        })(Modernizr);

    </script>

    <script src="./js/036cd73b705f0f91404e.main.js" type="text/javascript"></script>

    <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <style>
      body {
        font-size: 16px;
        font-family: Helvetica, Verdana, Arial, sans-serif;
      }
      h1 {
        font-size: 24px;
      }
      p {
        font-size: 16px;
      }
      .popUp {
        position: absolute;
        width: 300px;
        height: 200px;
        z-index: 15;
        top: 50%;
        left: 50%;
        margin: -100px 0 0 -150px;
        background-color: #acde73;
        padding: 20px;
      }
      .close {
        width: 40px;
        height: 40px;
        border: 2px solid #ffffff;
        background: #333333;
        position: absolute;
        color: #ffffff;
        top: -6px;
        right: -6px;
        font-size: 24px;
        text-align: center;
        border-radius: 50%;
        cursor: pointer;

      }
    </style>
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/WebGL.json", {onProgress: UnityProgress});
    </script>
  </head>
  <body>
  <div id="id"></div>
    <div class="webgl-content">
      <div id="gameContainer" style="width: 1024px; height: 768px"></div>
      <!--div class="footer">
        <div class="webgl-logo"></div>
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
        <div class="title">Julkalendern</div>
      </div-->
    </div>
    <script type="text/javascript">

      function closepopup() {
          var elem = document.getElementById("popUp");
          elem.parentElement.removeChild(elem);

          analytics.trackAsEvent('clicked-gorbis-robotlabb-close-info', {
              svt_domain: "svt.se",
              svt_level1: "barnkanalen",
              svt_level2: "julkalendern:-gorbis-robotlabb",
              svt_level3: "start",
              prop6: "spel",
              svt_appname: "julkalendern:-gorbis-robotlabb"
          });
      }
        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        var isIE = /*@cc_on!@*/false || !!document.documentMode;
        if (isSafari && !Modernizr.isios) {
            var str = '<div id="popUp" class="popUp"><button onclick="closepopup()" class="close">X</button><h1>Be en vuxen om hjälp</h1><p class="text">Du behöver byta webbläsare för att spela Gorbis Robotlabb. Spelet är optimerat för Chrome, Firefox & Edge. Gorbis Robotlabb finns också som app till mobil & surfplatta.</p></div>',
                div = document.getElementById( 'id' );
                div.insertAdjacentHTML( 'beforeend', str );
        }
        if (Modernizr.isios || Modernizr.isandroid) {window.location.href = 'mobile.html';}
        if (isIE) {
            window.location.href = 'ie.html';
        }


    </script>
  </body>
</html>
